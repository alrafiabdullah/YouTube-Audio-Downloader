{% extends "main/base.html" %}


{% block bodyblock %}
    <div align="center">
        <h3>YouTube Audio Downloader</h3>
        {% for message in messages %}
        <div class="alert alert-{{message.tags}}" role="alert">
            {{ message }}
        </div>            
        {% endfor %}
        <form class="m-3" action={% url 'index' %} method="POST">
            {% csrf_token %}
            <input class="form-control" type="url" name="url" placeholder="Enter YouTube URL" required>
            <input class="btn btn-primary mt-3" type="submit" value="Convert">
        </form>

        <h5>Total Audios: <span style="color: blue;">{{total}}</span></h5>
        <h5>Total Pages: <span style="color: blue;">{{page}}</span></h5>
        <table border="1" class="mb-3 mt-3">
            <thead align="center">
                <th>Serial</th>
                <th>Name</th>
                <th>Time</th>
                <th>Link</th>
            </thead>           
            <tbody>
                {% for audio in audios %}
                    <tr align="center">
                        <td>{{audio.pk}}</td>
                        <td style="padding: 1%;">{{audio.name}}</td>
                        <td>{{audio.downloaded_at | timesince}} ago</td>
                        <td><a target="_blank" href={% url 'download' audio.name %}>Download</a></td>
                        
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        

        {% if audios.has_previous %}
            <a class="btn btn-info" href="{% url 'index' %}?page={{audios.previous_page_number}}">Previous Page</a>
        {% endif %} 

        {% if audios.has_next %}
            <a class="btn btn-info" href="{% url 'index' %}?page={{audios.next_page_number}}">Next Page</a>
        {% endif %}
    </div>
{% endblock bodyblock %}